/*! jQuery Geo - v1.0.0-test - 2013-05-13
* http://jquerygeo.com
* Copyright (c) 2013 Ryan Westphal; Licensed MIT, GPL */
this.jsviews||this.jQuery&&jQuery.views||function(t,e){function n(t,e){var n="\\"+t.charAt(0),r="\\"+t.charAt(1),i="\\"+e.charAt(0),a="\\"+e.charAt(1);return H.rTag=g=r+"(?:(?:(\\w+(?=[\\/\\s"+i+"]))|(?:(\\w+)?(:)|(>)|(\\*)))"+"\\s*((?:[^"+i+"]|"+i+"(?!"+a+"))*?)"+"(\\/)?|(?:\\/(\\w+)))"+i,g=RegExp(n+g+a,"g"),w=RegExp("<.*>|"+t+".*"+e),this}function r(t){var n=this,r=n.tmpl.helpers||{};return t=(n.ctx[t]!==e?n.ctx:r[t]!==e?r:u[t]!==e?u:{})[t],"function"!=typeof t?t:function(){return t.apply(n,arguments)}}function i(t,e,n){var r=e.tmpl.converters;return t=r&&r[t]||h[t],t?t.call(e,n):n}function a(t,n,r,i,a){a.props=a.props||{};var s,l=a.props.tmpl,u=n.tmpl.tags,h=n.tmpl.templates,f=arguments,d=u&&u[t]||c[t];return d?(i=i&&n.tmpl.tmpls[i-1],l=l||i||e,a.tmpl=""+l===l?h&&h[l]||o[l]||o(l):l,a.isTag=A,a.converter=r,a.view=n,a.renderContent=p,n.ctx&&E(a.ctx,n.ctx),s=d.apply(a,f.length>5?V.call(f,5):[]),s||(s==e?"":""+s)):""}function s(t,n,i,a,s,l){var o=i.views,c={tmpl:s,path:n,parent:i,data:a,ctx:t,views:x.isArray(a)?[]:{},hlp:r};return x.isArray(o)?o.splice(c.index=l!==e?l:o.length,0,c):o[c.index="_"+j++]=c,c}function l(t,n,r,i,a){var s,l;if(r&&"object"==typeof r&&!r.nodeType){for(s in r)n(s,r[s]);return t}return r&&i!==e?""+r===r&&(null===i?delete n[r]:(i=a?a(r,i):i)&&(n[r]=i)):a&&(i=a(e,i||r)),(l=b.onStoreItem)&&l(n,r,i,a),i}function o(t,e){return l(this,o,t,e,y)}function c(t,e){return l(this,c,t,e)}function u(t,e){return l(this,u,t,e)}function h(t,e){return l(this,h,t,e)}function p(t,n,r,i,a){var l,c,u,h,p,f,d,v,y,m,_={},g=a===A,w=this,S="";if(w.isTag?(y=w.tmpl,n=n||w.ctx,r=r||w.view,i=i||w.path,a=a||w.index,_=w.props):y=w.jquery&&w[0]||w,r=r||H.topView,v=r.ctx,m=y.layout,t===r&&(t=r.data,m=A),n=n&&n===v?v:v?(v=E({},v),n?E(v,n):v):n||{},_.link===R&&(n.link=R),y.fn||(y=o[y]||o(y)),p=n.link&&b.onRenderItem,f=n.link&&b.onRenderItems,y){if(x.isArray(t)&&!m)for(h=g?r:a!==e&&r||s(n,i,r,t,y,a),l=0,c=t.length;c>l;l++)u=t[l],d=y.fn(u,s(n,i,h,u,y,(a||0)+l),H),S+=p?p(d,_):d;else h=g?r:s(n,i,r,t,y,a),S+=t||m?y.fn(t,h,H):"";return r.topKey=h.index,f?f(S,i,h.index,y,_):S}return""}function f(){throw"Syntax error"}function d(t,e,n){function r(e){e-=k,e&&D.push(t.substr(k,e).replace(I,"\\n"))}function i(e,i,s,l,o,c,u,h,p,f){o&&(l=":",s="html");var d="",y="",m=!h&&!l;if(i=i||l,r(f),k=f+e.length,c?b&&D.push(["*",u.replace(M,"$1")]):i?("else"===i&&(Y[5]=t.substring(Y[5],f),Y=j.pop(),D=Y[3],m=A),u=u?v(u,n).replace(N,function(t,e,n){return e?y+=n+",":d+=n+",",""}):"",d=d.slice(0,-1),u=u.slice(0,-1),a=[i,s||"",u,m&&[],"{"+(d?"props:{"+d+"},":"")+"path:'"+u+"'"+(y?",ctx:{"+y.slice(0,-1)+"}":"")+"}"],m&&(j.push(Y),Y=a,Y[5]=k),D.push(a)):p&&(Y[5]=t.substring(Y[5],f),Y=j.pop()),!Y)throw"Expected block tag";D=Y[3]}var a,s,l,o,c,u,h,p,f,y,_,x,w,E,S,b,R=e?{allowCode:b=e.allowCode,debug:e.debug}:{},C=e&&e.tmpls,T=[],k=0,j=[],D=T,Y=[,,,T],L=0;for(t=t.replace(O,"\\$1"),t.replace(g,i),r(t.length),o=T.length,c=o?"":'"";',l=0;o>l;l++)s=T[l],"*"===s[0]?c=c.slice(0,l?-1:-3)+";"+s[1]+(o>l+1?"ret+=":""):""+s===s?c+='"'+s+'"+':(_=s[0],x=s[1],w=s[2],D=s[3],E=s[4],t=s[5],D&&(S=m(t,R,e,L++),d(t,S),C.push(S)),y=y||E.indexOf("view")>-1,c+=(":"===_?"html"===x?(h=A,"e("+w):x?(f=A,'c("'+x+'",view,'+w):(p=A,"((v="+w+')!=u?v:""'):(u=A,'t("'+_+'",view,"'+(x||"")+'",'+(D?C.length:'""')+","+E+(w?",":"")+w))+")+");return c=Function("data, view, j, b, u",X+(p?"v,":"")+(u?"t=j.tag,":"")+(f?"c=j.convert,":"")+(h?"e=j.converters.html,":"")+"ret; try{\n\n"+(R.debug?"debugger;":"")+(b?"ret=":"return ")+c.slice(0,-1)+";\n\n"+(b?"return ret;":"")+"}catch(e){return j.err(e);}"),e&&(e.fn=c,e.useVw=f||y||u),c}function v(t,n){function r(t,r,c,u,h,p,d,v,y,m,_,x,g,w,E,S){function b(t,e,r,i,a,s,l){if(e){var o=(r?'view.hlp("'+r+'")':i?"view":"data")+(l?(a?"."+a:r?"":i?"":"."+e)+(s||""):(l=r?"":i?a||"":e,""));return n&&"("!==y&&(o="b("+o+',"'+l+'")'),o+(l?"."+l:"")}return t}return h=h||"",c=c||r||_,u=u||v,y=y||E||"",h=h||"",p?(f(),e):o?(o=!x,o?t:'"'):l?(l=!g,l?t:'"'):(c?(s++,c):"")+(S?s?"":i?(i=R,"\b"):",":d?(s&&f(),i=A,"\b"+u+":"):u?u.replace(T,b)+(y?(a[++s]=A,y):h):h?t:w?(a[s--]=R,w+(y?(a[++s]=A,y):"")):m?(a[s]||f(),","):r?"":(o=x,l=g,'"'))}var i,a={},s=0,l=R,o=R;return t=(t+" ").replace(k,r)}function y(t,n,r,i){function a(n){return""+n===n||n.nodeType>0?(l=n.nodeType>0?n:!w.test(n)&&C&&C(n)[0],l&&l.type&&(n=o[l.getAttribute(L)],n||(t=t||"_"+D++,l.setAttribute(L,t),n=y(t,l.innerHTML,r,i),o[t]=n)),n):e}var s,l,c,u,h;if(s=a(n),i=i||(n.markup?n:{}),i.name=t,u=i.templates,!s&&n.markup&&(s=a(n.markup))&&(!s.fn||s.debug===n.debug&&s.allowCode===n.allowCode||(s=s.markup)),s!==e){t&&!r&&(F[t]=function(){return n.render.apply(n,arguments)}),s.fn||n.fn?s.fn&&(n=t&&t!==s.name?E(E({},s),i):s):(n=m(s,i,r,0),d(s,n));for(c in u)h=u[c],h.name!==c&&(u[c]=y(c,h,n));return n}}function m(t,e,n,r){function i(t){n[t]&&(a[t]=E(E({},n[t]),e[t]))}e=e||{};var a={markup:t,tmpls:[],links:[],render:p};return n&&(n.templates&&(a.templates=E(E({},n.templates),e.templates)),a.parent=n,a.name=n.name+"["+r+"]",a.index=r),E(a,e),n&&(i("templates"),i("tags"),i("helpers"),i("converters")),a}function _(t){return Y[t]||(Y[t]="&#"+t.charCodeAt(0)+";")}var x,g,w,E,S="v1.0pre",b={},R=!1,A=!0,C=t.jQuery,T=/^(?:null|true|false|\d[\d.]*|([\w$]+|~([\w$]+)|#(view|([\w$]+))?)([\w$.]*?)(?:[.[]([\w$]+)\]?)?|(['"]).*\8)$/g,k=/(\()(?=|\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*([)\]])([([]?))|(\s+)/g,I=/\r?\n/g,M=/\\(['"])/g,O=/\\?(['"])/g,N=/\x08(~)?([^\x08]+)\x08/g,j=0,D=0,Y={"&":"&amp;","<":"&lt;",">":"&gt;"},L="data-jsv-tmpl",X="var j=j||"+(C?"jQuery.":"js")+"views,",P=/[\x00"&'<>]/g,V=Array.prototype.slice,F={},H={jsviews:S,sub:b,debugMode:A,err:function(t){return H.debugMode?"<br/><b>Error:</b> <em> "+(t.message||t)+". </em>":'""'},tmplFn:d,render:F,templates:o,tags:c,helpers:u,converters:h,View:s,convert:i,delimiters:n,tag:a};C?(x=C,x.templates=o,x.render=F,x.views=H,x.fn.render=p):(x=t.jsviews=H,x.extend=function(t,e){var n;t=t||{};for(n in e)t[n]=e[n];return t},x.isArray=Array&&Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}),E=x.extend,H.topView={views:{},tmpl:{},hlp:r,ctx:H.helpers},c({"if":function(){var t=this,n=t.view;return n.onElse=function(t,r){for(var i=0,a=r.length;a&&!r[i++];)if(i===a)return"";return n.onElse=e,t.path="",t.renderContent(n)},n.onElse(this,arguments)},"else":function(){var t=this.view;return t.onElse?t.onElse(this,arguments):""},"for":function(){var t,e=this,n="",r=arguments,i=r.length;for(e.props.layout&&(e.tmpl.layout=A),t=0;i>t;t++)n+=e.renderContent(r[t]);return n},"=":function(t){return t},"*":function(t){return t}}),h({html:function(t){return t!=e?(t+"").replace(P,_):""}}),n("{{","}}")}(this);
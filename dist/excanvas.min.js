/*! jQuery Geo - v1.0.0-test - 2013-05-13
* http://jquerygeo.com
* Copyright (c) 2013 Ryan Westphal; Licensed MIT, GPL */
document.createElement("canvas").getContext||function(){function t(){return this.context_||(this.context_=new x(this))}function e(t,e){var i=N.call(arguments,2);return function(){return t.apply(e,i.concat(N.call(arguments)))}}function i(t,e,i){t.namespaces[e]||t.namespaces.add(e,i,"#default#VML")}function n(t){if(i(t,"g_vml_","urn:schemas-microsoft-com:vml"),i(t,"g_o_","urn:schemas-microsoft-com:office:office"),!t.styleSheets.ex_canvas_){var e=t.createStyleSheet();e.owningElement.id="ex_canvas_",e.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function a(t){var e=t.srcElement;switch(t.propertyName){case"width":e.getContext().clearRect(),e.style.width=e.attributes.width.nodeValue+"px",e.firstChild.style.width=e.clientWidth+"px";break;case"height":e.getContext().clearRect(),e.style.height=e.attributes.height.nodeValue+"px",e.firstChild.style.height=e.clientHeight+"px"}}function r(t){var e=t.srcElement;e.firstChild&&(e.firstChild.style.width=e.clientWidth+"px",e.firstChild.style.height=e.clientHeight+"px")}function s(){return[[1,0,0],[0,1,0],[0,0,1]]}function h(t,e){for(var i=s(),n=0;3>n;n++)for(var a=0;3>a;a++){for(var r=0,h=0;3>h;h++)r+=t[n][h]*e[h][a];i[n][a]=r}return i}function l(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.font=t.font,e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.arcScaleX_=t.arcScaleX_,e.arcScaleY_=t.arcScaleY_,e.lineScale_=t.lineScale_}function c(t){var e=t.indexOf("(",3),i=t.indexOf(")",e+1),n=t.substring(e+1,i).split(",");return(4!=n.length||"a"!=t.charAt(3))&&(n[3]=1),n}function o(t){return parseFloat(t)/100}function u(t,e,i){return Math.min(i,Math.max(e,t))}function _(t){var e,i,n,a,r,s;if(a=parseFloat(t[0])/360%360,0>a&&a++,r=u(o(t[1]),0,1),s=u(o(t[2]),0,1),0==r)e=i=n=s;else{var h=.5>s?s*(1+r):s+r-s*r,l=2*s-h;e=f(l,h,a+1/3),i=f(l,h,a),n=f(l,h,a-1/3)}return"#"+D[Math.floor(255*e)]+D[Math.floor(255*i)]+D[Math.floor(255*n)]}function f(t,e,i){return 0>i&&i++,i>1&&i--,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}function p(t){if(t in X)return X[t];var e,i=1;if(t+="","#"==t.charAt(0))e=t;else if(/^rgb/.test(t)){for(var n,a=c(t),e="#",r=0;3>r;r++)n=-1!=a[r].indexOf("%")?Math.floor(255*o(a[r])):+a[r],e+=D[u(n,0,255)];i=+a[3]}else if(/^hsl/.test(t)){var a=c(t);e=_(a),i=a[3]}else e=t;return X[t]={color:e,alpha:i}}function y(t){return P[t]||"square"}function x(t){this.m_=s(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*M,this.globalAlpha=1,this.canvas=t;var e="width:"+t.clientWidth+"px;height:"+t.clientHeight+"px;overflow:hidden;position:absolute",i=t.ownerDocument.createElement("div");i.style.cssText=e,t.appendChild(i);var n=i.cloneNode(!1);n.style.backgroundColor="red",n.style.filter="alpha(opacity=0)",t.appendChild(n),this.element_=i,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function d(t,e,i,n){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:i.x,cp2y:i.y,x:n.x,y:n.y}),t.currentX_=n.x,t.currentY_=n.y}function v(t,e){var i=p(t.strokeStyle),n=i.color,a=i.alpha*t.globalAlpha,r=t.lineScale_*t.lineWidth;1>r&&(a*=r),e.push("<g_vml_:stroke",' opacity="',a,'"',' joinstyle="',t.lineJoin,'"',' miterlimit="',t.miterLimit,'"',' endcap="',y(t.lineCap),'"',' weight="',r,'px"',' color="',n,'" />')}function m(t,e,i,n){t.fillStyle,t.arcScaleX_,t.arcScaleY_,n.x-i.x,n.y-i.y;var a=p(t.fillStyle),r=a.color,s=a.alpha*t.globalAlpha;e.push('<g_vml_:fill color="',r,'" opacity="',s,'" />')}function g(t,e,i){var n=t.m_;return{x:M*(e*n[0][0]+i*n[1][0]+n[2][0])-O,y:M*(e*n[0][1]+i*n[1][1]+n[2][1])-O}}function E(t){return isFinite(t[0][0])&&isFinite(t[0][1])&&isFinite(t[1][0])&&isFinite(t[1][1])&&isFinite(t[2][0])&&isFinite(t[2][1])}function S(t,e,i){if(E(e)&&(t.m_=e,i)){var n=e[0][0]*e[1][1]-e[0][1]*e[1][0];t.lineScale_=I(b(n))}}function R(t){this.code=this[t],this.message=t+": DOM Exception "+this.code}var C=Math,T=C.round,A=C.sin,w=C.cos,b=C.abs,I=C.sqrt,M=10,O=M/2;+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];var N=Array.prototype.slice;n(document);var k={init:function(t){var i=t||document;i.createElement("canvas"),i.attachEvent("onreadystatechange",e(this.init_,this,i))},init_:function(t){for(var e=t.getElementsByTagName("canvas"),i=0;e.length>i;i++)this.initElement(e[i])},initElement:function(e){if(!e.getContext){e.getContext=t,n(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",a),e.attachEvent("onresize",r);var i=e.attributes;i.width&&i.width.specified?e.style.width=i.width.nodeValue+"px":e.width=e.clientWidth,i.height&&i.height.specified?e.style.height=i.height.nodeValue+"px":e.height=e.clientHeight}return e}};k.init();for(var D=[],Y=0;16>Y;Y++)for(var L=0;16>L;L++)D[16*Y+L]=Y.toString(16)+L.toString(16);var X={},P={butt:"flat",round:"round"},F=x.prototype;F.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},F.beginPath=function(){this.currentPath_=[]},F.moveTo=function(t,e){var i=g(this,t,e);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},F.lineTo=function(t,e){var i=g(this,t,e);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},F.bezierCurveTo=function(t,e,i,n,a,r){var s=g(this,a,r),h=g(this,t,e),l=g(this,i,n);d(this,h,l,s)},F.quadraticCurveTo=function(t,e,i,n){var a=g(this,t,e),r=g(this,i,n),s={x:this.currentX_+2/3*(a.x-this.currentX_),y:this.currentY_+2/3*(a.y-this.currentY_)},h={x:s.x+(r.x-this.currentX_)/3,y:s.y+(r.y-this.currentY_)/3};d(this,s,h,r)},F.arc=function(t,e,i,n,a,r){i*=M;var s=r?"at":"wa",h=t+w(n)*i-O,l=e+A(n)*i-O,c=t+w(a)*i-O,o=e+A(a)*i-O;h!=c||r||(h+=.125);var u=g(this,t,e),_=g(this,h,l),f=g(this,c,o);this.currentPath_.push({type:s,x:u.x,y:u.y,radius:i,xStart:_.x,yStart:_.y,xEnd:f.x,yEnd:f.y})},F.stroke=function(t){var e=[],i=10,n=10;e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',i,"px;height:",n,'px;"',' coordorigin="0,0"',' coordsize="',M*i,",",M*n,'"',' stroked="',!t,'"',' path="');for(var a={x:null,y:null},r={x:null,y:null},s=0;this.currentPath_.length>s;s++){var h,l=this.currentPath_[s];switch(l.type){case"moveTo":h=l,e.push(" m ",T(l.x),",",T(l.y));break;case"lineTo":e.push(" l ",T(l.x),",",T(l.y));break;case"close":e.push(" x "),l=null;break;case"bezierCurveTo":e.push(" c ",T(l.cp1x),",",T(l.cp1y),",",T(l.cp2x),",",T(l.cp2y),",",T(l.x),",",T(l.y));break;case"at":case"wa":e.push(" ",l.type," ",T(l.x-this.arcScaleX_*l.radius),",",T(l.y-this.arcScaleY_*l.radius)," ",T(l.x+this.arcScaleX_*l.radius),",",T(l.y+this.arcScaleY_*l.radius)," ",T(l.xStart),",",T(l.yStart)," ",T(l.xEnd),",",T(l.yEnd))}l&&((null==a.x||l.x<a.x)&&(a.x=l.x),(null==r.x||l.x>r.x)&&(r.x=l.x),(null==a.y||l.y<a.y)&&(a.y=l.y),(null==r.y||l.y>r.y)&&(r.y=l.y))}e.push(' ">'),t?m(this,e,a,r):v(this,e),e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},F.fill=function(){this.stroke(!0)},F.closePath=function(){this.currentPath_.push({type:"close"})},F.save=function(){var t={};l(this,t),this.aStack_.push(t),this.mStack_.push(this.m_),this.m_=h(s(),this.m_)},F.restore=function(){this.aStack_.length&&(l(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},F.translate=function(t,e){var i=[[1,0,0],[0,1,0],[t,e,1]];S(this,h(i,this.m_),!1)},F.scale=function(t,e){this.arcScaleX_*=t,this.arcScaleY_*=e;var i=[[t,0,0],[0,e,0],[0,0,1]];S(this,h(i,this.m_),!0)};var H=R.prototype=Error();H.INDEX_SIZE_ERR=1,H.DOMSTRING_SIZE_ERR=2,H.HIERARCHY_REQUEST_ERR=3,H.WRONG_DOCUMENT_ERR=4,H.INVALID_CHARACTER_ERR=5,H.NO_DATA_ALLOWED_ERR=6,H.NO_MODIFICATION_ALLOWED_ERR=7,H.NOT_FOUND_ERR=8,H.NOT_SUPPORTED_ERR=9,H.INUSE_ATTRIBUTE_ERR=10,H.INVALID_STATE_ERR=11,H.SYNTAX_ERR=12,H.INVALID_MODIFICATION_ERR=13,H.NAMESPACE_ERR=14,H.INVALID_ACCESS_ERR=15,H.VALIDATION_ERR=16,H.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=k,CanvasRenderingContext2D=x,DOMException=R}();
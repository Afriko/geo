(function(d){function m(l){var e=[].slice.call(arguments,1),f=0;l=d.event.fix(l||window.event);l.type="mousewheel";if(l.wheelDelta)f=l.wheelDelta/120;if(l.detail)f=-l.detail/3;e.unshift(l,f);return d.event.handle.apply(this,e)}var q=["DOMMouseScroll","mousewheel"];d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var l=q.length;l;)this.addEventListener(q[--l],m,false);else this.onmousewheel=m},teardown:function(){if(this.removeEventListener)for(var l=q.length;l;)this.removeEventListener(q[--l],
m,false);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(l){return l?this.bind("mousewheel",l):this.trigger("mousewheel")},unmousewheel:function(l){return this.unbind("mousewheel",l)}})})(jQuery);
(function(d,m){var q=Array.prototype.slice,l=d.cleanData;d.cleanData=function(e){for(var f=0,g;(g=e[f])!=null;f++)d(g).triggerHandler("remove");l(e)};d.widget=function(e,f,g){var k=e.split(".")[0],n;e=e.split(".")[1];n=k+"-"+e;if(!g){g=f;f=d.Widget}d.expr[":"][n]=function(o){return!!d.data(o,e)};d[k]=d[k]||{};d[k][e]=d.extend(function(o,t){if(!this._createWidget)return new d[k][e](o,t);arguments.length&&this._createWidget(o,t)},d[k][e]);var p=new f;p.options=d.extend(true,{},p.options);d.each(g,function(o,
t){if(d.isFunction(t))g[o]=function(){var B=function(w){return f.prototype[w].apply(this,q.call(arguments,1))},A=function(w,j){return f.prototype[w].apply(this,j)};return function(){var w=this._super,j=this._superApply,v;this._super=B;this._superApply=A;v=t.apply(this,arguments);this._super=w;this._superApply=j;return v}}()});d[k][e].prototype=d.extend(true,p,{namespace:k,widgetName:e,widgetEventPrefix:e,widgetBaseClass:n},g);d.widget.bridge(e,d[k][e])};d.widget.bridge=function(e,f){d.fn[e]=function(g){var k=
typeof g==="string",n=q.call(arguments,1),p=this;g=!k&&n.length?d.extend.apply(null,[true,g].concat(n)):g;k?this.each(function(){var o=d.data(this,e);if(!o)return d.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+g+"'");if(!d.isFunction(o[g])||g.charAt(0)==="_")return d.error("no such method '"+g+"' for "+e+" widget instance");var t=o[g].apply(o,n);if(t!==o&&t!==m){p=t;return false}}):this.each(function(){var o=d.data(this,e);o?o.option(g||{})._init():f(g,
this)});return p}};d.Widget=function(e,f){if(!this._createWidget)return new d[namespace][name](e,f);arguments.length&&this._createWidget(e,f)};d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false},_createWidget:function(e,f){f=d(f||this.defaultElement||this)[0];this.element=d(f);this.options=d.extend(true,{},this.options,this._getCreateOptions(),e);this.bindings=d();this.hoverable=d();this.focusable=d();if(f!==this){d.data(f,this.widgetName,this);
this._bind({remove:"destroy"})}this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return d.metadata&&d.metadata.get(this.element[0])[this.widgetName]},_create:d.noop,_init:d.noop,destroy:function(){this._destroy();this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled");this.bindings.unbind("."+this.widgetName);this.hoverable.removeClass("ui-state-hover");
this.focusable.removeClass("ui-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(e,f){var g=e;if(arguments.length===0)return d.extend({},this.options);if(typeof e==="string"){if(f===m)return this.options[e];g={};g[e]=f}this._setOptions(g);return this},_setOptions:function(e){var f=this;d.each(e,function(g,k){f._setOption(g,k)});return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",
!!f).attr("aria-disabled",f);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_bind:function(e,f){if(f){e=d(e);this.bindings=this.bindings.add(e)}else{f=e;e=this.element}var g=this;d.each(f,function(k,n){e.bind(k+"."+g.widgetName,function(){if(!(g.options.disabled===true||d(this).hasClass("ui-state-disabled")))return(typeof n===
"string"?g[n]:n).apply(g,arguments)})})},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._bind(e,{mouseenter:function(f){d(f.currentTarget).addClass("ui-state-hover")},mouseleave:function(f){d(f.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._bind(e,{focusin:function(f){d(f.currentTarget).addClass("ui-state-focus")},focusout:function(f){d(f.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,f,g){var k=
this.options[e];f=d.Event(f);f.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();g=g||{};if(f.originalEvent){e=d.event.props.length;for(var n;e;){n=d.event.props[--e];f[n]=f.originalEvent[n]}}this.element.trigger(f,g);g=d.isArray(g)?[f].concat(g):[f,g];return!(d.isFunction(k)&&k.apply(this.element[0],g)===false||f.isDefaultPrevented())}}})(jQuery);
(function(d){d.geo={_center:function(m){return[(m[0]+m[2])/2,(m[1]+m[3])/2]},_expandBy:function(m,q,l){m=this._center(m);return[m[0]-q,m[1]-l,m[0]+q,m[1]+l]},_height:function(m){return m[3]-m[1]},_reaspect:function(m,q){var l=this._width(m),e=this._height(m);this._center(m);if(l==0||e==0||q<=0)return m;if(l/e>q){l=l/2;e=l/q}else{e=e/2;l=e*q}return[c[0]-l,c[1]-e,c[0]+l,c[1]+e]},_scaleBy:function(m,q){return this._expandBy(m,this._width(m)*q/2,this._height(m)*q/2)},_width:function(m){return m[2]-m[0]},
proj:function(){function m(e){return e>Math.PI?e-=q:e<-Math.PI?e+=q:e}var q=6.283185307179586;this.CoordinateSystem=function(e,f,g,k){if(arguments.length<2)f=0;if(arguments.length<3)g=0;if(arguments.length<4)k=1;switch(k){case "meters":k=1;break;case "feet":k=3.2808333333333333}this.toGeodetic=function(n){return e.toGeodetic({x:(n.x-f)/k,y:(n.y-g)/k})};this.toProjected=function(n){n=e.toProjected(n);return{x:n.x*k+f,y:n.y*k+g}}};this.Mercator=function(e,f,g){e*=0.017453292519943295;f*=0.017453292519943295;
var k=g.e*g.e,n=Math.sin(f),p=1/(Math.sqrt(1-k*n*n)/Math.cos(f));f=k*k;n=f*k;var o=n*k,t=k/2+5*f/24+n/12+13*o/360,B=7*f/48+29*n/240+811*o/11520,A=7*n/120+81*o/1120,w=4279*o/161280;this.toGeodetic=function(j){var v=m(e+j.x/(p*g.smaj));j=1.5707963267948966-2*Math.atan(1/Math.exp(j.y/(p*g.smaj)));return{x:v*57.29577951308232,y:(j+t*Math.sin(2*j)+B*Math.sin(4*j)+A*Math.sin(6*j)+w*Math.sin(8*j))*57.29577951308232}};this.toProjected=function(j){var v=j.y*0.017453292519943295,a=g.e*Math.sin(v);v=Math.tan(Math.PI/
4+v/2)*Math.pow((1-a)/(1+a),g.e/2);j=m(j.x*0.017453292519943295-e);return{x:p*g.smaj*j,y:p*g.smaj*Math.log(v)}}};this.Spheroid=function(e,f){switch(typeof e){case "number":this.smaj=e;this.e=f;break;case "string":switch(e){case "WGS84Sphere":this.smaj=6378137;this.e=0}}this.smin=this.smaj*Math.sqrt(1-this.e*this.e);var g=(this.smaj-this.smin)/this.smaj;this.distance=function(k,n,p){if(arguments.length<3)p=1;switch(p){case "meters":p=1;break;case "feet":p=3.2808333333333333}var o=k.y*0.017453292519943295,
t=n.y*0.017453292519943295,B=(o+t)*0.5,A=(o-t)*0.5,w=(k.x*0.017453292519943295-n.x*0.017453292519943295)*0.5;o=Math.sin(B);o*=o;B=Math.cos(B);B*=B;t=Math.sin(A);t*=t;A=Math.cos(A);A*=A;var j=Math.sin(w);j*=j;var v=Math.cos(w);v*=v;w=t*v+B*j;j=A*v+o*j;v=Math.atan(Math.sqrt(w/j));var a=Math.sqrt(w*j)/v;return 2*this.smaj*v*(1+g*((3*a-1)/(2*j)*o*A-(3*a+1)/(2*w)*B*t))*p}};var l=new Mercator(0,0,new Spheroid("WGS84Sphere"));return{fromGeodetic:function(e){for(var f=[],g=0,k;g<e.length;g++){k=l.toProjected({x:e[g][0],
y:e[g][1]});f[g]=[k.x,k.y]}return f},toGeodetic:function(e){for(var f=[],g=0,k;g<e.length;g++){k=l.toGeodetic({x:e[g][0],y:e[g][1]});f[g]=[k.x,k.y]}return f}}}()}})(jQuery,this);
(function(d,m){var q="center",l="pixelSize",e,f={},g,k,n,p,o,t,B=function(){for(var a=5,b=document.createElement("div"),h=b.all||[];b.innerHTML="<!--[if gt IE "+ ++a+"]><br><![endif]--\>",h[0];);return a>6?a:!a}(),A=this._supportTouch||this._ieVersion==7,w={},j={},v={bbox:[-180,-90,180,90],bboxMax:[-180,-90,180,90],center:[0,0],cursors:{pan:"move"},mode:"pan",pixelSize:156543.03392799935,services:[{id:"OSM",type:"tiled",getUrl:function(a){return"http://tile.openstreetmap.org/"+a.zoom+"/"+a.tile.column+
"/"+a.tile.row+".png"},attr:"&copy; OpenStreetMap &amp; contributors, CC-BY-SA",visible:true}],tilingScheme:{tileWidth:256,tileHeight:256,levels:18,basePixelSize:156543.03392799935,origin:[-2.0037508342787E7,2.0037508342787E7]},zoom:0,_serviceTypes:{tiled:{create:function(a,b,h){if(this[b.id]==null){this[b.id]={loadCount:0,reloadTiles:false,serviceContainer:null};a='<div data-service="'+b.id+'" style="position:absolute; left:0; top:0; width:8px; height:8px; margin:0; padding:0; display:'+(b.visible?
"block":"none")+';"></div>';h!=null?d(k.children()[h]).before(a):k.append(a);this[b.id].serviceContainer=k.children('[data-service="'+b.id+'"]')}},destroy:function(a,b){this[b.id].serviceContainer.remove();delete this[b.id]},interactivePan:function(a,b,h,s){this._cancelUnloaded(a,b);this[b.id].serviceContainer.children().css({left:function(r,y){return parseInt(y)+h},top:function(r,y){return parseInt(y)+s}})},interactiveScale:function(){},refresh:function(a,b){if(b!=null&&this[b.id]!=null&&b.visible){this._cancelUnloaded(a,
b);var h=this[b.id],s=h.serviceContainer,r=l,y=a._getBbox(),z=a.options.tilingScheme,u=z.tileWidth,x=z.tileHeight,C=Math.floor((y[0]-z.origin[0])/(r*u)),J=Math.floor((z.origin[1]-y[3])/(r*x)),N=Math.ceil((y[2]-z.origin[0])/(r*u)),S=Math.ceil((z.origin[1]-y[1])/(r*x)),E=a._getBboxMax(),D=a._tiledPixelSize(0),K=D/r,O=Math.floor((E[0]-z.origin[0])/(D*u))*K,P=Math.floor((z.origin[1]-E[3])/(D*x))*K,G=Math.round((z.origin[0]+O*u*r-y[0])/r),H=Math.round((y[3]-(z.origin[1]-P*x*r))/r);y=s.children().show();
E=y.filter('[data-pixelSize="'+r+'"]').appendTo(s);var M=b.opacity==null?1:b.opacity;h.reloadTiles&&y.find("img").attr("data-dirty","true");if(E.size()===0){s.append('<div style="position:absolute; left:'+G%u+"px; top:"+H%x+"px; width:"+u+"px; height:"+x+'px; margin:0; padding:0;" data-pixelSize="'+r+'"></div>');E=s.children(":last").data("scaleOrigin",G%u+","+H%x)}else{E.css({left:G%u+"px",top:H%x+"px"}).data("scaleOrigin",G%u+","+H%x);E.children().each(function(){var I=d(this),Q=I.attr("data-tile").split(",");
I.css({left:Math.round((parseInt(Q[0])-O)*100+(G-G%u)/u*100)+"%",top:Math.round((parseInt(Q[1])-P)*100+(H-H%x)/x*100)+"%"});M<1&&I.fadeTo(0,M)})}for(C=C;C<N;C++)for(D=J;D<S;D++){K=""+C+","+D;var F=E.children('[data-tile="'+K+'"]');F.removeAttr("data-dirty");if(F.size()===0||h.reloadTiles){var L=[z.origin[0]+C*u*r,z.origin[1]-D*x*r],R=[z.origin[0]+((C+1)*u-1)*r,z.origin[1]-((D+1)*x-1)*r];L=b.getUrl({bbox:[L[0],L[1],R[0],R[1]],width:u,height:x,zoom:a._getZoom(),tile:{row:D,column:C}});h.loadCount++;
if(h.reloadTiles&&F.size()>0)F.attr("src",L);else{F='<img style="position:absolute; left:'+((C-O)*100+(G-G%u)/u*100)+"%; top:"+((D-P)*100+(H-H%x)/x*100)+"%; ";if(d("body")[0].filters===m)F+="width: 100%; height: 100%;";F+='margin:0; padding:0; -moz-user-select:none; display:none;" unselectable="on" data-tile="'+K+'" />';E.append(F);F=E.children(":last");F.load(function(I){M<1?d(I.target).fadeTo(0,M):d(I.target).show();h.loadCount--;if(h.loadCount<=0){s.children(':not([data-pixelSize="'+r+'"])').remove();
h.loadCount=0}}).error(function(I){d(I.target).remove();h.loadCount--;if(h.loadCount<=0){s.children(':not([data-pixelSize="'+r+'"])').remove();h.loadCount=0}}).attr("src",L)}}}y.find("[data-dirty]").remove();h.reloadTiles=false}},_cancelUnloaded:function(a,b){var h=this[b.id],s=h.serviceContainer;if(h.loadCount>0)for(s.find("img:hidden").remove();h.loadCount>0;)h.loadCount--},_onOpacityChanged:function(){}}}};d.widget("geo.geomap",function(){return{options:d.extend({},v),_createWidget:function(a,
b){w=a;e=d(b);var h=e.css("position");h!="relative"&&h!="absolute"&&h!="fixed"&&e.css("position","relative");e.css("text-align","left");h=this._findMapSize();f={x:parseInt(e.css("padding-left")),y:parseInt(e.css("padding-top")),width:h.width,height:h.height};this._createChildren();q=o=[0,0];l=t=156543.03392799935;this._mouseDown=this._inOp=this._toolPan=this._shiftZoom=this._panning=this._isTap=this._isDbltap=false;this._anchor=this._current=this._lastMove=this._lastDrag=this._velocity=[0,0];this._friction=
[0.8,0.8];this._downDate=this._moveDate=this._clickDate=0;d.Widget.prototype._createWidget.apply(this,arguments)},_create:function(){j=this.options;var a=(this._supportTouch="ontouchend"in document)?"touchstart":"mousedown",b=this._supportTouch?"touchend touchcancel":"mouseup",h=this._supportTouch?"touchmove":"mousemove";p.dblclick(d.proxy(this._eventTarget_dblclick,this));p.bind(a,d.proxy(this._eventTarget_touchstart,this));a=p[0].setCapture?p:d(document);a.bind(h,d.proxy(this._dragTarget_touchmove,
this));a.bind(b,d.proxy(this._dragTarget_touchstop,this));p.mousewheel(d.proxy(this._eventTarget_mousewheel,this));w.bbox&&this._setOption("bbox",w.bbox,false);p.css("cursor",j.cursors[j.mode]);this._createServices();this._refresh()},_setOption:function(a,b,h,s){switch(a){case "bbox":this._setBbox(b,h===m||h,s===m||s);b=this._getBbox();if(d.geo.proj){var r=d.geo.proj.toGeodetic([[b[0],b[1]],[b[2],b[3]]]);b=[r[0][0],r[0][1],r[1][0],r[1][1]]}}d.Widget.prototype._setOption.apply(this,arguments)},destroy:function(){d.Widget.prototype.destroy.apply(this,
arguments);this.element.html("")},_getBbox:function(){var a=f.width/2*l,b=f.height/2*l;return[q[0]-a,q[1]-b,q[0]+a,q[1]+b]},_setBbox:function(a,b,h){if(d.geo.proj){var s=d.geo.proj.fromGeodetic([[a[0],a[1]],[a[2],a[3]]]);a=[s[0][0],s[0][1],s[1][0],s[1][1]]}s=[a[0]+(a[2]-a[0])/2,a[1]+(a[3]-a[1])/2];a=Math.max(d.geo._width(a)/f.width,d.geo._height(a)/f.height);if(j.tilingScheme)a=this._tiledPixelSize(this._tiledZoom(a));this._setCenterAndSize(s,a,b,h)},_getBboxMax:function(){var a=f.width/2*t,b=f.height/
2*t;return[o[0]-a,o[1]-b,o[0]+a,o[1]+b]},_getZoom:function(){if(j.tilingScheme)return this._tiledZoom(l);else{var a=f.width/f.height,b=d.geo._reaspect(this._getBbox(),a);a=d.geo._reaspect(this._getBboxMax(),a);return Math.log(d.geo._width(a)/d.geo._width(b))/Math.log(2)}},_createChildren:function(){var a=e.children().detach();a.css("-moz-user-select","none");e.prepend('<div style="position:absolute; left:'+f.x+"px; top:"+f.y+"px; width:"+f.width+"px; height:"+f.height+'px; margin:0; padding:0; overflow:hidden; -khtml-user-select:none; -moz-user-select:none; -webkit-user-select:none; user-select:none;" unselectable="on"></div>');
p=g=e.children(":first");g.append('<div style="position:absolute; left:0; top:0; width:'+f.width+"px; height:"+f.height+'px; margin: 0; padding: 0;"></div>');k=g.children(":last");g.append('<div style="position:absolute; left:0; top:0; width:'+f.width+"px; height:"+f.height+'px; margin: 0; padding: 0;"></div>');g.children(":last");g.append('<div class="ui-widget ui-widget-content ui-corner-all" style="position:absolute; left:0; top:0px; max-width:128px; display:none;"><div style="margin:.2em;"></div></div>');
n=g.children(":last");n.children();g.append(a)},_createServices:function(){for(var a=0;a<j.services.length;a++)j._serviceTypes[j.services[a].type].create(this,j.services[a])},_findMapSize:function(){for(var a={width:0,height:0},b=e;b.size()&&!(a.width>0&&a.height>0);){a={width:b.width(),height:b.height()};if(a.width<=0||a.height<=0)a={width:parseInt(b.css("width")),height:parseInt(b.css("height"))};b=b.parent()}return a},_panEnd:function(){this._velocity=[this._velocity[0]>0?Math.floor(this._velocity[0]*
this._friction[0]):Math.ceil(this._velocity[0]*this._friction[0]),this._velocity[1]>0?Math.floor(this._velocity[1]*this._friction[1]):Math.ceil(this._velocity[1]*this._friction[1])];if(Math.abs(this._velocity[0])<4&&Math.abs(this._velocity[1])<4)this._panFinalize();else{this._current=[this._current[0]+this._velocity[0],this._current[1]+this._velocity[1]];this._panMove();setTimeout(d.proxy(this._panEnd,this),30)}},_panFinalize:function(){if(this._panning){this._velocity=[0,0];this._setCenterAndSize([q[0]+
-(this._current[0]-this._anchor[0])*l,q[1]+(this._current[1]-this._anchor[1])*l],l,true,true);this._inOp=false;this._anchor=this._current;this._toolPan=this._panning=false;p.css("cursor",j.cursors[j.mode])}},_panMove:function(){var a=this._current[0]-this._lastDrag[0],b=this._current[1]-this._lastDrag[1];if(this._toolPan||a>3||a<-3||b>3||b<-3){if(!this._toolPan){this._toolPan=true;p.css("cursor",j.cursors.pan)}if(this._mouseDown)this._velocity=[a,b];if(a!=0||b!=0){this._panning=true;this._lastDrag=
this._current;for(i=0;i<j.services.length;i++){var h=j.services[i];j._serviceTypes[h.type].interactivePan(this,h,a,b)}}}},_refresh:function(){for(var a=0;a<j.services.length;a++){var b=j.services[a];!this._mouseDown&&j._serviceTypes[b.type]!=null&&j._serviceTypes[b.type].refresh(this,b)}},_setCenterAndSize:function(a,b,h,s){if(l!=b)for(h=0;h<j.services.length;h++){var r=j.services[h];j._serviceTypes[r.type].interactiveScale(this,r,a,b)}q=a;l=b;s&&this._refresh()},_tiledPixelSize:function(a){var b=
j.tilingScheme;if(b!=null){if(a===0)return b.pixelSizes!=null?b.pixelSizes[0]:b.basePixelSize;a=Math.round(a);a=Math.max(a,0);a=Math.min(a,(b.pixelSizes!=null?b.pixelSizes.length:b.levels)-1);return b.pixelSizes!=null?b.pixelSizes[a]:b.basePixelSize/Math.pow(2,a)}else return NaN},_tiledZoom:function(a){var b=j.tilingScheme;if(b.pixelSizes!=null){a=Math.round(a);for(var h=(b.pixelSizes!=null?b.pixelSizes.length:b.levels)-1;h>=0;h--)if(Math.round(b.pixelSizes[h])>=a)return h;return 0}else return Math.max(Math.round(Math.log(b.basePixelSize/
a)/Math.log(2)),0)},_toMap:function(a,b,h){var s=d.isArray(a[0]);s||(a=[a]);b=b||q;h=h||l;var r=f.width,y=f.height,z=r/2*h;h=y/2*h;var u=[b[0]-z,b[1]-h,b[0]+z,b[1]+h],x=d.geo._width(u)/r,C=d.geo._height(u)/y,J=[];d.each(a,function(N){J[N]=[u[0]+this[0]*x,u[3]-this[1]*C]});return s?J:J[0]},_zoomTo:function(a,b){b=b<0?0:b;var h=this._tiledPixelSize(b);if(isNaN(h)){h=d.geo._scaleBy(this._getBboxMax(),1/Math.pow(2,b));h=Math.max(d.geo._width(h)/f.width,d.geo._height(h)/f.height);this._setCenterAndSize(a,
h,false,true)}else this._setCenterAndSize(a,h,false,true)},_eventTarget_dblclick:function(a){this._panFinalize();offset=d(a.currentTarget).offset();switch(j.mode){case "pan":this._zoomTo(this._toMap(this._current),this._getZoom()+1)}this._inOp=false},_eventTarget_touchstart:function(a){if(!(!this._supportTouch&&a.which!=1)){if(A){var b=d.now();this._isDbltap=b-this._downDate<750?this._isDbltap?false:this._isTap:false;this._isTap=true;this._downDate=b}a.preventDefault();this._panFinalize();b=d(a.currentTarget).offset();
this._current=this._supportTouch?[a.originalEvent.changedTouches[0].pageX-b.left,a.originalEvent.changedTouches[0].pageY-b.top]:[a.pageX-b.left,a.pageY-b.top];this._mouseDown=true;this._anchor=this._current;if(!this._inOp&&a.shiftKey){this._shiftZoom=true;p.css("cursor",j.cursors.zoom)}else{this._inOp=true;switch(j.mode){case "pan":this._lastDrag=this._current;a.currentTarget.setCapture&&a.currentTarget.setCapture()}}return false}},_dragTarget_touchmove:function(a){var b=p.offset();a=this._supportTouch?
[a.originalEvent.changedTouches[0].pageX-b.left,a.originalEvent.changedTouches[0].pageY-b.top]:[a.pageX-b.left,a.pageY-b.top];if(!(a[0]==this._lastMove[0]&&a[1]==this._lastMove[1])){if(A)this._isDbltap=this._isTap=false;if(this._mouseDown){this._current=a;this._moveDate=d.now()}switch(this._shiftZoom?"zoom":j.mode){case "pan":this._mouseDown&&this._panMove()}this._lastMove=a}},_dragTarget_touchstop:function(a){!this._mouseDown&&B==7&&this._eventTarget_touchstart(a);var b=this._mouseDown,h=p.offset();
h=this._supportTouch?[a.originalEvent.changedTouches[0].pageX-h.left,a.originalEvent.changedTouches[0].pageY-h.top]:[a.pageX-h.left,a.pageY-h.top];var s=this._shiftZoom?"zoom":j.mode;p.css("cursor",j.cursors[s]);this._shiftZoom=this._mouseDown=this._toolPan=false;document.releaseCapture&&document.releaseCapture();if(b){b=d.now();this._current=h;switch(s){case "pan":b-this._moveDate>500?this._panFinalize():this._panEnd()}this._clickDate=b;if(A&&this._isDbltap){this._isDbltap=this._isTap=false;p.trigger("dblclick",
a)}}},_eventTarget_mousewheel:function(){}}}())})(jQuery);

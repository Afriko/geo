<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>jQuery Geo test page</title>
  <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
  <meta name="description" content="Test all of the things!">
  <meta name="author" content="Ryan Westphal">

  <style type="text/css">

    #map
    {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    #info {
      background: #fafafa;
      border-radius: .5em;
      box-shadow: .2em .2em .4em #222;
      font-size: .8em;
      max-width: 66%;
      padding: .25em .5em;
      position: absolute;
      left: 1em;
      top: 1em;
    }


  </style>
</head>
<body>
  <div id="map">
    <div id="info">Browse to <a href="http://www.google.com">google.com</a> and then click back.</div>
  </div>

  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>

  <script src="../../js/excanvas.js"></script>
  <script src="../../js/jsrender.js"></script>
  <script src="../../js/jquery.mousewheel.js"></script>
  <script src="../../js/jquery.ui.widget.js"></script>
  <script src="../../js/jquery.geo.core.js"></script>
  <script src="../../js/jquery.geo.geographics.js"></script>
  <script src="../../js/jquery.geo.geomap.js"></script>
  <script src="../../js/jquery.geo.tiled.js"></script>
  <script src="../../js/jquery.geo.shingled.js"></script>
  <!--<script src="../../dist/jquery.geo-1.0.0-test.min.js"></script>-->

  <script>
$(function() {
  var hover = null;
  
  // create a map
  var map = $("#map").geomap({
    services: [
      {
        id: 'map-countries-service',
        type: 'shingled',
        src: ""
      },
      {
        id: 'map-highlight-service',
        type: 'shingled',
        src: ""
      }
    ],
    center: [ 0, 20 ],
    zoom: 2,
    cursors: {
      click: 'pointer'
    },
    move: function( e, geo ) {
      var countries = map.geomap( 'find', geo, 1 );
      if ( countries.length > 0 ) {
        map.geomap( 'option', 'mode', 'click' );
        
        if ( countries[ 0 ] !== hover ) {
          if ( hover ) {
            mapHighlightService.geomap( 'remove', hover, false );
          }
          
          hover = $.extend( true, { }, countries[ 0 ] );
          console.log("move - append");
          mapHighlightService.geomap( 'append', hover );
        }
        
      } else {
        map.geomap( 'option', 'mode', 'pan' );
        
        if ( hover ) {
          mapHighlightService.geomap( 'remove', hover );
          hover = null;
        }
      }
    }    
  });
  
  var mapCountriesService = $( '#map-countries-service' ).geomap( 'option', 'shapeStyle', {
    color: '#36484a',
    fillOpacity: 1,
    stroke: '#addfe6',
    strokeWidth: '1px'
  } );
  var mapHighlightService = $( '#map-highlight-service' ).geomap( 'option', 'shapeStyle', {
    fillOpacity: 0,
    stroke: '#aaa04e',
    strokeWidth: '2px'
  } );
  
  // grab the world countries file
  $.getJSON('http://data.jquerygeo.com/ne_110m_land.geojson', function (result) {
    // append them to the map
    $.each( result.features, function( ) {
      mapCountriesService.geomap('append', this, {
        color: '#36484a'
      }, false);
    });
    
    // show them
    map.geomap('refresh');
  });
});

  </script>
</body>
</html>
